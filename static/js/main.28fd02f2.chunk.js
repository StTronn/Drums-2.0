(this["webpackJsonpdrums2.0"]=this["webpackJsonpdrums2.0"]||[]).push([[0],{11:function(e,t,n){e.exports=n(20)},16:function(e,t,n){},17:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(9),i=n.n(o),s=(n(16),n(1)),c=n(2),l=n(4),u=n(3),d=n(5),m=(n(17),n(6),n(7)),v=n.n(m);function h(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{attackTime:.001,decayTime:.102,sustain:1.3,relaseTime:.4},o=e.createBufferSource(),i=r.attackTime,s=r.decayTime,c=r.sustain,l=r.relaseTime;console.log(r);var u=e.createGain();u.gain.value=0,u.gain.linearRampToValueAtTime(0,e.currentTime),u.gain.linearRampToValueAtTime(5,e.currentTime+i),u.gain.linearRampToValueAtTime(c,e.currentTime+i+s),u.gain.linearRampToValueAtTime(0,e.currentTime+i+s+l),o.buffer=t,o.connect(u),void 0!==a?u.connect(a):u.connect(e.destination),o[o.start?"start":"noteOn"](n)}function p(e,t,n){this.context=e,this.urlList=t,this.onload=n,this.bufferList=new Array,this.loadCount=0}function f(e,t){this.input=this.output=e.createConvolver(),this._context=e;var n=this.meta.params;t=t||{},this._seconds=t.seconds||n.seconds.defaultValue,this._decay=t.decay||n.decay.defaultValue,this._reverse=t.reverse||n.reverse.defaultValue,this._buildImpulse()}p.prototype.loadBuffer=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer";var a=this;n.onload=function(){a.context.decodeAudioData(n.response,(function(n){n?(a.bufferList[t]=n,++a.loadCount==a.urlList.length&&a.onload(a.bufferList)):alert("error decoding file data: "+e)}),(function(e){console.error("decodeAudioData error",e)}))},n.onerror=function(){alert("BufferLoader: XHR error")},n.send()},p.prototype.load=function(){for(var e=0;e<this.urlList.length;++e)this.loadBuffer(this.urlList[e],e)},f.prototype=Object.create(null,{connect:{value:function(e){this.output.connect(e.input?e.input:e)}},disconnect:{value:function(){this.output.disconnect()}},_buildImpulse:{value:function(){var e,t,n=this._context.sampleRate,a=n*this.seconds,r=this.decay,o=this._context.createBuffer(2,a,n),i=o.getChannelData(0),s=o.getChannelData(1);for(t=0;t<a;t++)e=this.reverse?a-t:t,i[t]=(2*Math.random()-1)*Math.pow(1-e/a,r),s[t]=(2*Math.random()-1)*Math.pow(1-e/a,r);this.input.buffer=o}},meta:{value:{name:"SimpleReverb",params:{seconds:{min:1,max:50,defaultValue:3,type:"float"},decay:{min:0,max:100,defaultValue:2,type:"float"},reverse:{min:0,max:1,defaultValue:0,type:"bool"}}}},seconds:{enumerable:!0,get:function(){return this._seconds},set:function(e){this._seconds=e,this._buildImpulse()}},decay:{enumerable:!0,get:function(){return this._decay},set:function(e){this._decay=e,this._buildImpulse()}},reverse:{enumerable:!0,get:function(){return this._reverse},set:function(e){this._reverse=e,this._buildImpulse()}}});var b=f,y=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){n.setState({volume:e.target.value})},n.handleEnvelopeChange=function(e,t){var a=n.state.envelope,r=n.props,o=r.handleEnvelope,i=r.soundkey,s=a[t];s+e>=0&&s+e<=3&&(a[t]=s+e,n.setState({envelope:a},(function(){o(a,i)})))},n.state={selected:!1,volume:1,gainNode:null,envelope:{attackTime:.001,decayTime:.103,sustain:1.3,relaseTime:.5}},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.connector,n=e.context,a=e.endConnector,r=(e.handleEnvelope,e.soundkey,n.createGain());t.connect(r),r.connect(a),this.setState({gainNode:r})}},{key:"componentDidUpdate",value:function(e){if(e.selected!==this.props.selected){var t=this.props.selected;this.setState({selected:t})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.changeSelectedSounds,a=t.soundkey,o=t.clearPattern,i=this.state,s=i.volume,c=i.gainNode,l=i.selected,u=this.state.envelope;return null!==c&&(c.gain.value=s),r.a.createElement("div",{className:"instrument"},r.a.createElement("div",{className:"rangeSlider"},r.a.createElement("input",{type:"range",id:"volume",min:"0",max:"2",value:s,step:"0.01",onChange:this.handleChange})),r.a.createElement("div",{className:"filterCointainer"},r.a.createElement("h5",null,"Attack"),r.a.createElement("div",{className:"filter-button",id:"decrease",onClick:function(){e.handleEnvelopeChange(-.001,"attackTime")}},"-"),r.a.createElement("div",{className:"filter-value"},100*u.attackTime),r.a.createElement("div",{className:"filter-button",id:"increase",onClick:function(){e.handleEnvelopeChange(.001,"attackTime")}},"+")),r.a.createElement("div",{className:"filterCointainer"},r.a.createElement("h5",null,"Decay"),r.a.createElement("div",{className:"filter-button",id:"decrease",onClick:function(){e.handleEnvelopeChange(-.001,"decayTime")}},"-"),r.a.createElement("div",{className:"filter-value"},u.decayTime),r.a.createElement("div",{className:"filter-button",id:"increase",onClick:function(){e.handleEnvelopeChange(.001,"decayTime")}},"+")),r.a.createElement("div",{className:"filterCointainer"},r.a.createElement("h5",null,"sustain"),r.a.createElement("div",{className:"filter-button",id:"decrease",onClick:function(){e.handleEnvelopeChange(-.1,"sustain")}},"-"),r.a.createElement("div",{className:"filter-value"},u.sustain),r.a.createElement("div",{className:"filter-button",id:"increase",onClick:function(){e.handleEnvelopeChange(.1,"sustain")}},"+")),r.a.createElement("div",{className:"filterCointainer"},r.a.createElement("h5",null,"relase"),r.a.createElement("div",{className:"filter-button",id:"decrease",onClick:function(){e.handleEnvelopeChange(-.001,"relaseTime")}},"-"),r.a.createElement("div",{className:"filter-value"},u.relaseTime),r.a.createElement("div",{className:"filter-button",id:"increase",onClick:function(){e.handleEnvelopeChange(.001,"relaseTime")}},"+")),r.a.createElement("div",{className:!0===l?"instrumentButtonSelected":"instrumentButton",onClick:function(){n(a)}},a),r.a.createElement("div",{className:"clearButton",onClick:function(){o(a)}},"clear"))}}]),t}(r.a.Component),g=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={selectedSound:null},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){if(e.selectedSound!==this.props.selectedSound){var t=this.props.selectedSound;this.setState({selectedSound:t})}}},{key:"render",value:function(){var e=this.props,t=e.soundkeys,n=e.changeSelectedSounds,a=e.connectors,o=e.context,i=e.endConnector,s=e.handleEnvelope,c=e.clearPattern,l=this.state.selectedSound;return r.a.createElement("div",{className:"instrumentArea"},t.map((function(e,t){return r.a.createElement(y,{key:t,context:o,changeSelectedSounds:n,selected:l===e,soundkey:e,connector:a[e],endConnector:i,handleEnvelope:s,clearPattern:c})})))}}]),t}(r.a.Component),k=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.tempo,n=e.changeTempo;return r.a.createElement("div",{style:{float:"left"},className:"tempoCointainer"},r.a.createElement("h5",null,"TEMPO"),r.a.createElement("div",{className:"value-button",id:"decrease",onClick:function(){n(-10)}},"-"),r.a.createElement("input",{type:"number",id:"number",value:t}),r.a.createElement("div",{className:"value-button",id:"increase",onClick:function(){n(10)}},"+"))}}]),t}(r.a.Component),E=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.volume,n=e.changeVolume;return r.a.createElement("div",{style:{float:"left"},className:"tempoCointainer"},r.a.createElement("h5",null,"VOL"),r.a.createElement("div",{className:"value-button",id:"decrease",onClick:function(){n(-.2)}},"-"),r.a.createElement("input",{type:"number",id:"number",value:10*t.toFixed(2)}),r.a.createElement("div",{className:"value-button",id:"increase",onClick:function(){n(.2)}},"+"))}}]),t}(r.a.Component),C=n(10),S=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={pattern:null,counter:0,isPlaying:!1},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.bar,t=new Array(e).fill(0);this.setState({pattern:t})}},{key:"componentDidUpdate",value:function(e){if(e!==this.props){var t=this.props,n=t.counter,a=t.isPlaying,r=t.padPattern,o=t.bar;void 0===r?this.setState({pattern:new Array(o).fill(0),counter:n,isPlaying:a}):this.setState({pattern:r,counter:n,isPlaying:a})}}},{key:"render",value:function(){for(var e=this.props,t=e.bar,n=e.handleClick,a=this.state,o=a.pattern,i=a.isPlaying,s=a.counter,c=[],l=0;l<t;l++)i&&l===s?c.push("currentPad"):o&&1==o[l]?c.push("padGlow"):c.push("pad");return r.a.createElement("div",{className:"padArea"},Object(C.a)(Array(t)).map((function(e,t){return r.a.createElement("div",{className:c[t],key:t,onClick:function(){n(t)}},r.a.createElement("h6",null,t+1))})))}}]),t}(r.a.Component),w=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).bufferLoad=function(){var e=n.state,t=e.bar,a=e.soundmap,r=e.context,o=e.connectors,i=e.volume,s={},c=Object.keys(a),l={};null===r&&(r=new window.AudioContext);var u=new b(r,{seconds:.2,decay:0,reverse:0}),d=r.createGain();d.gain.value=i,d.connect(r.destination);for(var m={},v=0,h=c;v<h.length;v++){var f=h[v],y=new Array(t).fill(0);l[f]=y,o[f]=r.createGain(),m[f]={attackTime:.001,decayTime:.102,sustain:1.3,relaseTime:.4}}!function(e,t,n,a){var r=[],o=[];for(var i in n){var s=n[i];r.push(i),o.push(s)}new p(e,o,(function(e){for(var n=0;n<e.length;n++){var o=e[n],i=r[n];t[i]=o}a&&a()})).load()}(r,s,a),n.setState({context:r,buffer:s,pattern:l,soundkeys:c,connectors:o,endConnector:d,reverb:u,envelopes:m})},n.clearPattern=function(e){var t=n.state,a=t.pattern,r=t.bar,o=new Array(r).fill(0);a[e]=o,n.setState({pattern:a})},n.start=function(){var e=n.state,t=e.tempo;!0!==e.isPlaying&&(n.interval=setInterval(n.loop,6e4/t),n.setState({isPlaying:!0}))},n.stop=function(){!1!==n.state.isPlaying&&(window.clearInterval(n.interval),n.setState({isPlaying:!1}))},n.changeTempo=function(e){var t=n.state,a=t.tempo,r=t.isPlaying,o=n.start;a+e>=50&&a+e<=260&&(a+=e,!0===r?(n.stop(),n.setState({tempo:a},(function(){o()}))):n.setState({tempo:a}))},n.tap=function(){n.setState({selectedSound:null})},n.loop=function(){var e=n.state,t=e.counter,a=e.bar,r=e.soundkeys,o=e.pattern,i=e.buffer,s=e.context,c=e.connectors,l=e.envelopes;t=(t+1)%a;var u=!0,d=!1,m=void 0;try{for(var v,p=r[Symbol.iterator]();!(u=(v=p.next()).done);u=!0){var f=v.value;1===o[f][t]&&h(s,i[f],0,c[f],l[f])}}catch(b){d=!0,m=b}finally{try{u||null==p.return||p.return()}finally{if(d)throw m}}n.setState({counter:t})},n.changeSelectedSounds=function(e){n.setState({selectedSound:e})},n.handleClick=function(e){var t=n.state,a=t.context,r=t.buffer,o=t.selectedSound,i=t.pattern;if(null===o)h(a,r.kick,0);else{for(var s=0===i[o][e]?1:0,c=[],l=0;l<i[o].length;l++)l!==e?c.push(i[o][l]):c.push(s);i[o]=c}n.setState({pattern:i})},n.handleEnvelope=function(e,t){var a=n.state.envelopes;a[t]=e,n.setState({envelopes:a})},n.toggleReverb=function(){var e=n.state.reverbOn;n.setState({reverbOn:!e})},n.keyHandler=function(e){var t=n.state,a=t.buffer,r=t.selectedSound,o=t.context;v.a.isEmpty(a)||null!==r||(97!==e.keyCode&&49!=e.keyCode||h(o,a.kick,0),98!==e.keyCode&&50!=e.keyCode||h(o,a.hihat,0),99!==e.keyCode&&51!=e.keyCode||h(o,a.snare,0),100!==e.keyCode&&52!=e.keyCode||h(o,a.tom,0),101!==e.keyCode&&53!=e.keyCode||h(o,a.ride,0))},n.changeVolume=function(e){var t=n.state.volume;t+e>=0&&t+e<=2&&n.setState({volume:t+e})},n.handleFiltersValue=function(){var e=n.state,t=e.endConnector,a=e.volume,r=e.reverb,o=e.reverbOn,i=e.context;null!==t&&(t.gain.value=a,o?(t.disconnect(),t.connect(r.input),r.connect(i.destination)):(t.disconnect(),t.connect(i.destination)))},n.state={buffer:{},pattern:{},soundnames:{kick:"kick",hihat:"hihat"},soundkeys:[],context:null,soundmap:{kick:"https://raw.githubusercontent.com/wesbos/JavaScript30/master/01%20-%20JavaScript%20Drum%20Kit/sounds/boom.wav",hihat:"https://raw.githubusercontent.com/wesbos/JavaScript30/master/01%20-%20JavaScript%20Drum%20Kit/sounds/hihat.wav ",openhat:"https://raw.githubusercontent.com/wesbos/JavaScript30/master/01%20-%20JavaScript%20Drum%20Kit/sounds/openhat.wav",snare:"https://raw.githubusercontent.com/wesbos/JavaScript30/master/01%20-%20JavaScript%20Drum%20Kit/sounds/snare.wav",tom:"https://raw.githubusercontent.com/wesbos/JavaScript30/master/01%20-%20JavaScript%20Drum%20Kit/sounds/tom.wav",ride:"https://raw.githubusercontent.com/wesbos/JavaScript30/master/01%20-%20JavaScript%20Drum%20Kit/sounds/ride.wav"},tempo:160,bar:16,isPlaying:!1,selectedSound:null,counter:0,connectors:{},endConnector:null,volume:1,reverb:null,reverbOn:!1,envelopes:null},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.bufferLoad()}},{key:"render",value:function(){var e=this.state,t=e.context,n=e.soundkeys,a=e.bar,o=e.tempo,i=e.connectors,s=e.endConnector,c=e.pattern,l=e.selectedSound,u=e.isPlaying,d=e.counter,m=e.volume,h=e.reverbOn;return window.addEventListener("keydown",this.keyHandler),this.handleFiltersValue(),r.a.createElement("div",null,!v.a.isEmpty(i)&&r.a.createElement("div",{className:"cointainer"},r.a.createElement("div",{className:"overallControl"},r.a.createElement(k,{tempo:o,changeTempo:this.changeTempo}),r.a.createElement(E,{volume:m,changeVolume:this.changeVolume}),r.a.createElement("div",{className:!0===h?"reverbButtonSelected":"reverbButton",onClick:this.toggleReverb},"reverb")),r.a.createElement(g,{soundkeys:n,changeSelectedSounds:this.changeSelectedSounds,connectors:i,endConnector:s,context:t,selectedSound:l,handleEnvelope:this.handleEnvelope,clearPattern:this.clearPattern}),r.a.createElement(S,{bar:a,handleClick:this.handleClick,padPattern:c[l],counter:d,isPlaying:u}),r.a.createElement("div",{className:"controlArea"},r.a.createElement("div",{className:!1===u?"start":"stop",onClick:!1===this.state.isPlaying?this.start:this.stop},!1===this.state.isPlaying?"start":"stop"),r.a.createElement("div",{className:null!==l?"start":"stop",onClick:this.tap},"tap"))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},6:function(e,t,n){}},[[11,1,2]]]);
//# sourceMappingURL=main.28fd02f2.chunk.js.map