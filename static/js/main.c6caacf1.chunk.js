(this["webpackJsonpdrums2.0"]=this["webpackJsonpdrums2.0"]||[]).push([[0],{11:function(e,t,n){e.exports=n(20)},16:function(e,t,n){},17:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(9),s=n.n(r),c=(n(16),n(1)),i=n(2),u=n(4),l=n(3),d=n(5),h=(n(17),n(6),n(7)),p=n.n(h);function m(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=e.createBufferSource();o.buffer=t,void 0!==a?o.connect(a):o.connect(e.destination),o[o.start?"start":"noteOn"](n)}function v(e,t,n){this.context=e,this.urlList=t,this.onload=n,this.bufferList=new Array,this.loadCount=0}function f(e,t){this.input=this.output=e.createConvolver(),this._context=e;var n=this.meta.params;t=t||{},this._seconds=t.seconds||n.seconds.defaultValue,this._decay=t.decay||n.decay.defaultValue,this._reverse=t.reverse||n.reverse.defaultValue,this._buildImpulse()}v.prototype.loadBuffer=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer";var a=this;n.onload=function(){a.context.decodeAudioData(n.response,(function(n){n?(a.bufferList[t]=n,++a.loadCount==a.urlList.length&&a.onload(a.bufferList)):alert("error decoding file data: "+e)}),(function(e){console.error("decodeAudioData error",e)}))},n.onerror=function(){alert("BufferLoader: XHR error")},n.send()},v.prototype.load=function(){for(var e=0;e<this.urlList.length;++e)this.loadBuffer(this.urlList[e],e)},f.prototype=Object.create(null,{connect:{value:function(e){this.output.connect(e.input?e.input:e)}},disconnect:{value:function(){this.output.disconnect()}},_buildImpulse:{value:function(){var e,t,n=this._context.sampleRate,a=n*this.seconds,o=this.decay,r=this._context.createBuffer(2,a,n),s=r.getChannelData(0),c=r.getChannelData(1);for(t=0;t<a;t++)e=this.reverse?a-t:t,s[t]=(2*Math.random()-1)*Math.pow(1-e/a,o),c[t]=(2*Math.random()-1)*Math.pow(1-e/a,o);this.input.buffer=r}},meta:{value:{name:"SimpleReverb",params:{seconds:{min:1,max:50,defaultValue:3,type:"float"},decay:{min:0,max:100,defaultValue:2,type:"float"},reverse:{min:0,max:1,defaultValue:0,type:"bool"}}}},seconds:{enumerable:!0,get:function(){return this._seconds},set:function(e){this._seconds=e,this._buildImpulse()}},decay:{enumerable:!0,get:function(){return this._decay},set:function(e){this._decay=e,this._buildImpulse()}},reverse:{enumerable:!0,get:function(){return this._reverse},set:function(e){this._reverse=e,this._buildImpulse()}}});var b=f,y=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).handleChange=function(e){n.setState({volume:e.target.value})},n.state={selected:!1,volume:1,gainNode:null},n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.connector,n=e.context,a=e.endConnector,o=n.createGain();t.connect(o),o.connect(a),this.setState({gainNode:o})}},{key:"componentDidUpdate",value:function(e){if(e.selected!==this.props.selected){var t=this.props.selected;this.setState({selected:t})}}},{key:"render",value:function(){var e=this.props,t=e.changeSelectedSounds,n=(e.connector,e.soundkey),a=this.state,r=a.volume,s=a.gainNode,c=a.selected;return null!==s&&(s.gain.value=r),o.a.createElement("div",{className:"instrument"},o.a.createElement("div",{className:"range-slider"},o.a.createElement("input",{type:"range",id:"volume",min:"0",max:"2",value:r,step:"0.01",onChange:this.handleChange})),o.a.createElement("div",{className:!0===c?"instrumentButtonSelected":"instrumentButton",onClick:function(){t(n)}},n))}}]),t}(o.a.Component),g=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={selectedSound:null},n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(e){if(e.selectedSound!==this.props.selectedSound){var t=this.props.selectedSound;this.setState({selectedSound:t})}}},{key:"render",value:function(){var e=this.props,t=e.soundkeys,n=e.changeSelectedSounds,a=e.connectors,r=e.context,s=e.endConnector,c=this.state.selectedSound;return o.a.createElement("div",{className:"instrumentArea"},t.map((function(e,t){return o.a.createElement(y,{key:t,context:r,changeSelectedSounds:n,selected:c===e,soundkey:e,connector:a[e],endConnector:s})})))}}]),t}(o.a.Component),k=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.tempo,n=e.changeTempo;return o.a.createElement("div",{style:{float:"left"},className:"tempoCointainer"},o.a.createElement("h5",null,"TEMPO"),o.a.createElement("div",{className:"value-button",id:"decrease",onClick:function(){n(-10)}},"-"),o.a.createElement("input",{type:"number",id:"number",value:t}),o.a.createElement("div",{className:"value-button",id:"increase",onClick:function(){n(10)}},"+"))}}]),t}(o.a.Component),S=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.volume,n=e.changeVolume;return o.a.createElement("div",{style:{float:"left"},className:"tempoCointainer"},o.a.createElement("h5",null,"VOL"),o.a.createElement("div",{className:"value-button",id:"decrease",onClick:function(){n(-.2)}},"-"),o.a.createElement("input",{type:"number",id:"number",value:10*t.toFixed(2)}),o.a.createElement("div",{className:"value-button",id:"increase",onClick:function(){n(.2)}},"+"))}}]),t}(o.a.Component),C=n(10),w=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={pattern:null,counter:0,isPlaying:!1},n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.bar,t=new Array(e).fill(0);this.setState({pattern:t})}},{key:"componentDidUpdate",value:function(e){if(e!==this.props){var t=this.props,n=t.counter,a=t.isPlaying,o=t.padPattern,r=t.bar;void 0===o?this.setState({pattern:new Array(r).fill(0),counter:n,isPlaying:a}):this.setState({pattern:o,counter:n,isPlaying:a})}}},{key:"render",value:function(){for(var e=this.props,t=e.bar,n=e.handleClick,a=this.state,r=a.pattern,s=a.isPlaying,c=a.counter,i=[],u=0;u<t;u++)s&&u===c?i.push("currentPad"):r&&1==r[u]?i.push("padGlow"):i.push("pad");return o.a.createElement("div",{className:"padArea"},Object(C.a)(Array(t)).map((function(e,t){return o.a.createElement("div",{className:i[t],key:t,onClick:function(){n(t)}},o.a.createElement("h6",null,t+1))})))}}]),t}(o.a.Component),O=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).bufferLoad=function(){var e=n.state,t=e.bar,a=e.soundmap,o=e.context,r=e.connectors,s=e.volume,c={},i=Object.keys(a),u={};null===o&&(o=new window.AudioContext);var l=new b(o,{seconds:.2,decay:0,reverse:0}),d=o.createGain();d.gain.value=s,d.connect(o.destination);for(var h=0,p=i;h<p.length;h++){var m=p[h],f=new Array(t).fill(0);u[m]=f,r[m]=o.createGain()}!function(e,t,n,a){var o=[],r=[];for(var s in n){var c=n[s];o.push(s),r.push(c)}new v(e,r,(function(e){for(var n=0;n<e.length;n++){var r=e[n],s=o[n];t[s]=r}a&&a()})).load()}(o,c,a),n.setState({context:o,buffer:c,pattern:u,soundkeys:i,connectors:r,endConnector:d,reverb:l})},n.start=function(){var e=n.state,t=e.tempo;!0!==e.isPlaying&&(n.interval=setInterval(n.loop,6e4/t),n.setState({isPlaying:!0}))},n.stop=function(){!1!==n.state.isPlaying&&(window.clearInterval(n.interval),n.setState({isPlaying:!1}))},n.changeTempo=function(e){var t=n.state,a=t.tempo,o=t.isPlaying,r=n.start;a+e>=50&&a+e<=260&&(a+=e,!0===o?(n.stop(),n.setState({tempo:a},(function(){r()}))):n.setState({tempo:a}))},n.tap=function(){n.setState({selectedSound:null})},n.loop=function(){var e=n.state,t=e.counter,a=e.bar,o=e.soundkeys,r=e.pattern,s=e.buffer,c=e.context,i=e.connectors;t=(t+1)%a;var u=!0,l=!1,d=void 0;try{for(var h,p=o[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var v=h.value;1===r[v][t]&&m(c,s[v],0,i[v])}}catch(f){l=!0,d=f}finally{try{u||null==p.return||p.return()}finally{if(l)throw d}}n.setState({counter:t})},n.changeSelectedSounds=function(e){n.setState({selectedSound:e})},n.handleClick=function(e){var t=n.state,a=t.context,o=t.buffer,r=t.selectedSound,s=t.pattern;if(null===r)m(a,o.kick,0);else{for(var c=0===s[r][e]?1:0,i=[],u=0;u<s[r].length;u++)u!==e?i.push(s[r][u]):i.push(c);s[r]=i}n.setState({pattern:s})},n.toggleReverb=function(){var e=n.state.reverbOn;n.setState({reverbOn:!e})},n.keyHandler=function(e){var t=n.state,a=t.buffer,o=t.selectedSound,r=t.context;p.a.isEmpty(a)||null!==o||(97!==e.keyCode&&49!=e.keyCode||m(r,a.kick,0),98!==e.keyCode&&50!=e.keyCode||m(r,a.hihat,0),99!==e.keyCode&&51!=e.keyCode||m(r,a.snare,0),100!==e.keyCode&&52!=e.keyCode||m(r,a.tom,0),101!==e.keyCode&&53!=e.keyCode||m(r,a.ride,0))},n.changeVolume=function(e){var t=n.state.volume;t+e>=0&&t+e<=2&&n.setState({volume:t+e})},n.handleFiltersValue=function(){var e=n.state,t=e.endConnector,a=e.volume,o=e.reverb,r=e.reverbOn,s=e.context;null!==t&&(t.gain.value=a,r?(t.disconnect(),t.connect(o.input),o.connect(s.destination)):(t.disconnect(),t.connect(s.destination)))},n.state={buffer:{},pattern:{},soundnames:{kick:"kick",hihat:"hihat"},soundkeys:[],context:null,soundmap:{kick:"https://raw.githubusercontent.com/wesbos/JavaScript30/master/01%20-%20JavaScript%20Drum%20Kit/sounds/boom.wav",hihat:"https://raw.githubusercontent.com/wesbos/JavaScript30/master/01%20-%20JavaScript%20Drum%20Kit/sounds/hihat.wav ",openhat:"https://raw.githubusercontent.com/wesbos/JavaScript30/master/01%20-%20JavaScript%20Drum%20Kit/sounds/openhat.wav",snare:"https://raw.githubusercontent.com/wesbos/JavaScript30/master/01%20-%20JavaScript%20Drum%20Kit/sounds/snare.wav",tom:"https://raw.githubusercontent.com/wesbos/JavaScript30/master/01%20-%20JavaScript%20Drum%20Kit/sounds/tom.wav",ride:"https://raw.githubusercontent.com/wesbos/JavaScript30/master/01%20-%20JavaScript%20Drum%20Kit/sounds/ride.wav"},tempo:160,bar:16,isPlaying:!1,selectedSound:null,counter:0,connectors:{},endConnector:null,volume:1,reverb:null,reverbOn:!1},n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.bufferLoad()}},{key:"render",value:function(){var e=this.state,t=e.context,n=e.soundkeys,a=e.bar,r=e.tempo,s=e.connectors,c=e.endConnector,i=e.pattern,u=e.selectedSound,l=e.isPlaying,d=e.counter,h=e.volume,m=e.reverbOn;return window.addEventListener("keydown",this.keyHandler),this.handleFiltersValue(),o.a.createElement("div",null,!p.a.isEmpty(s)&&o.a.createElement("div",{className:"cointainer"},o.a.createElement("div",{className:"overallControl"},o.a.createElement(k,{tempo:r,changeTempo:this.changeTempo}),o.a.createElement(S,{volume:h,changeVolume:this.changeVolume}),o.a.createElement("div",{className:!0===m?"reverbButtonSelected":"reverbButton",onClick:this.toggleReverb},"reverb")),o.a.createElement(g,{soundkeys:n,changeSelectedSounds:this.changeSelectedSounds,connectors:s,endConnector:c,context:t,selectedSound:u}),o.a.createElement(w,{bar:a,handleClick:this.handleClick,padPattern:i[u],counter:d,isPlaying:l}),o.a.createElement("div",{className:"controlArea"},o.a.createElement("div",{className:!1===l?"start":"stop",onClick:!1===this.state.isPlaying?this.start:this.stop},!1===this.state.isPlaying?"start":"stop"),o.a.createElement("div",{className:null!==u?"start":"stop",onClick:this.tap},"tap"))))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},6:function(e,t,n){}},[[11,1,2]]]);
//# sourceMappingURL=main.c6caacf1.chunk.js.map