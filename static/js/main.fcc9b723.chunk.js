(this["webpackJsonpdrums2.0"]=this["webpackJsonpdrums2.0"]||[]).push([[0],{11:function(e,t,n){e.exports=n(20)},16:function(e,t,n){},17:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(9),i=n.n(r),s=(n(16),n(1)),c=n(2),l=n(4),u=n(3),d=n(5),m=(n(17),n(6),n(7)),h=n.n(m);function v(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{attackTime:.001,decayTime:.102,sustain:1.3,relaseTime:.4},r=e.createBufferSource(),i=o.attackTime,s=o.decayTime,c=o.sustain,l=o.relaseTime,u=e.createGain();u.gain.value=0,u.gain.linearRampToValueAtTime(0,e.currentTime),u.gain.linearRampToValueAtTime(5,e.currentTime+i),u.gain.linearRampToValueAtTime(c,e.currentTime+i+s),u.gain.linearRampToValueAtTime(0,e.currentTime+i+s+l),r.buffer=t,r.connect(u),void 0!==a?u.connect(a):u.connect(e.destination),r[r.start?"start":"noteOn"](n)}function p(e,t,n){this.context=e,this.urlList=t,this.onload=n,this.bufferList=new Array,this.loadCount=0}function f(e,t){this.input=this.output=e.createConvolver(),this._context=e;var n=this.meta.params;t=t||{},this._seconds=t.seconds||n.seconds.defaultValue,this._decay=t.decay||n.decay.defaultValue,this._reverse=t.reverse||n.reverse.defaultValue,this._buildImpulse()}p.prototype.loadBuffer=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer";var a=this;n.onload=function(){a.context.decodeAudioData(n.response,(function(n){n?(a.bufferList[t]=n,++a.loadCount==a.urlList.length&&a.onload(a.bufferList)):alert("error decoding file data: "+e)}),(function(e){console.error("decodeAudioData error",e)}))},n.onerror=function(){alert("BufferLoader: XHR error")},n.send()},p.prototype.load=function(){for(var e=0;e<this.urlList.length;++e)this.loadBuffer(this.urlList[e],e)},f.prototype=Object.create(null,{connect:{value:function(e){this.output.connect(e.input?e.input:e)}},disconnect:{value:function(){this.output.disconnect()}},_buildImpulse:{value:function(){var e,t,n=this._context.sampleRate,a=n*this.seconds,o=this.decay,r=this._context.createBuffer(2,a,n),i=r.getChannelData(0),s=r.getChannelData(1);for(t=0;t<a;t++)e=this.reverse?a-t:t,i[t]=(2*Math.random()-1)*Math.pow(1-e/a,o),s[t]=(2*Math.random()-1)*Math.pow(1-e/a,o);this.input.buffer=r}},meta:{value:{name:"SimpleReverb",params:{seconds:{min:1,max:50,defaultValue:3,type:"float"},decay:{min:0,max:100,defaultValue:2,type:"float"},reverse:{min:0,max:1,defaultValue:0,type:"bool"}}}},seconds:{enumerable:!0,get:function(){return this._seconds},set:function(e){this._seconds=e,this._buildImpulse()}},decay:{enumerable:!0,get:function(){return this._decay},set:function(e){this._decay=e,this._buildImpulse()}},reverse:{enumerable:!0,get:function(){return this._reverse},set:function(e){this._reverse=e,this._buildImpulse()}}});var b=f,y=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){n.setState({volume:e.target.value})},n.handleEnvelopeChange=function(e,t){var a=n.state.envelope,o=n.props,r=o.handleEnvelope,i=o.soundkey,s=a[t];s+e>=0&&s+e<=3&&(a[t]=s+e,n.setState({envelope:a},(function(){r(a,i)})))},n.state={selected:!1,volume:1,gainNode:null,envelope:{attackTime:.001,decayTime:.103,sustain:1.3,relaseTime:.5}},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.connector,n=e.context,a=e.endConnector,o=(e.handleEnvelope,e.soundkey,n.createGain());t.connect(o),o.connect(a),this.setState({gainNode:o})}},{key:"componentDidUpdate",value:function(e){if(e.selected!==this.props.selected){var t=this.props.selected;this.setState({selected:t})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.changeSelectedSounds,a=t.soundkey,r=t.clearPattern,i=this.state,s=i.volume,c=i.gainNode,l=i.selected,u=this.state.envelope;return null!==c&&(c.gain.value=s),o.a.createElement("div",{className:"instrument"},o.a.createElement("div",{className:"rangeSlider"},o.a.createElement("input",{type:"range",id:"volume",min:"0",max:"2",value:s,step:"0.01",onChange:this.handleChange})),o.a.createElement("div",{className:"filterCointainer"},o.a.createElement("h5",null,"Attack"),o.a.createElement("div",{className:"filter-button",id:"decrease",onClick:function(){e.handleEnvelopeChange(-.001,"attackTime")}},"-"),o.a.createElement("div",{className:"filter-value"},100*u.attackTime),o.a.createElement("div",{className:"filter-button",id:"increase",onClick:function(){e.handleEnvelopeChange(.001,"attackTime")}},"+")),o.a.createElement("div",{className:"filterCointainer"},o.a.createElement("h5",null,"Decay"),o.a.createElement("div",{className:"filter-button",id:"decrease",onClick:function(){e.handleEnvelopeChange(-.01,"decayTime")}},"-"),o.a.createElement("div",{className:"filter-value"},10*u.decayTime),o.a.createElement("div",{className:"filter-button",id:"increase",onClick:function(){e.handleEnvelopeChange(.01,"decayTime")}},"+")),o.a.createElement("div",{className:"filterCointainer"},o.a.createElement("h5",null,"sustain"),o.a.createElement("div",{className:"filter-button",id:"decrease",onClick:function(){e.handleEnvelopeChange(-.1,"sustain")}},"-"),o.a.createElement("div",{className:"filter-value"},u.sustain),o.a.createElement("div",{className:"filter-button",id:"increase",onClick:function(){e.handleEnvelopeChange(.1,"sustain")}},"+")),o.a.createElement("div",{className:"filterCointainer"},o.a.createElement("h5",null,"relase"),o.a.createElement("div",{className:"filter-button",id:"decrease",onClick:function(){e.handleEnvelopeChange(-.01,"relaseTime")}},"-"),o.a.createElement("div",{className:"filter-value"},10*u.relaseTime),o.a.createElement("div",{className:"filter-button",id:"increase",onClick:function(){e.handleEnvelopeChange(.01,"relaseTime")}},"+")),o.a.createElement("div",{className:!0===l?"instrumentButtonSelected":"instrumentButton",onClick:function(){n(a)}},a),o.a.createElement("div",{className:"clearButton",onClick:function(){r(a)}},"clear"))}}]),t}(o.a.Component),k=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={selectedSound:null},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){if(e.selectedSound!==this.props.selectedSound){var t=this.props.selectedSound;this.setState({selectedSound:t})}}},{key:"render",value:function(){var e=this.props,t=e.soundkeys,n=e.changeSelectedSounds,a=e.connectors,r=e.context,i=e.endConnector,s=e.handleEnvelope,c=e.clearPattern,l=this.state.selectedSound;return o.a.createElement("div",{className:"instrumentArea"},t.map((function(e,t){return o.a.createElement(y,{key:t,context:r,changeSelectedSounds:n,selected:l===e,soundkey:e,connector:a[e],endConnector:i,handleEnvelope:s,clearPattern:c})})))}}]),t}(o.a.Component),g=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){n.setState({tempo:e.target.value})},n.handleSubmit=function(e){if("Enter"===e.key){var t=n.props,a=t.changeTempo,o=t.tempo;a(e.target.value-o)}},n.state={tempo:70},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){if(e.tempo!==this.props.tempo){var t=this.props.tempo;this.setState({tempo:t})}}},{key:"componentDidMount",value:function(){var e=this.props.tempo;this.setState({tempo:e})}},{key:"render",value:function(){var e=this.props.changeTempo;this.state.tempo;return o.a.createElement("div",{style:{float:"left"},className:"tempoCointainer"},o.a.createElement("h5",null,"TEMPO"),o.a.createElement("div",{className:"value-button",id:"decrease",onClick:function(){e(-10)}},"-"),o.a.createElement("input",{type:"number",id:"number",onChange:this.handleChange,onKeyPress:this.handleSubmit,value:this.state.tempo}),o.a.createElement("div",{className:"value-button",id:"increase",onClick:function(){e(10)}},"+"))}}]),t}(o.a.Component),C=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.volume,n=e.changeVolume;return o.a.createElement("div",{style:{float:"left"},className:"tempoCointainer"},o.a.createElement("h5",null,"VOL"),o.a.createElement("div",{className:"value-button",id:"decrease",onClick:function(){n(-.2)}},"-"),o.a.createElement("input",{type:"number",id:"number",value:10*t.toFixed(2)}),o.a.createElement("div",{className:"value-button",id:"increase",onClick:function(){n(.2)}},"+"))}}]),t}(o.a.Component),E=n(10),S=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={pattern:null,counter:0,isPlaying:!1},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.bar,t=new Array(e).fill(0);this.setState({pattern:t})}},{key:"componentDidUpdate",value:function(e){if(e!==this.props){var t=this.props,n=t.counter,a=t.isPlaying,o=t.padPattern,r=t.bar;void 0===o?this.setState({pattern:new Array(r).fill(0),counter:n,isPlaying:a}):this.setState({pattern:o,counter:n,isPlaying:a})}}},{key:"render",value:function(){for(var e=this.props,t=e.bar,n=e.handleClick,a=this.state,r=a.pattern,i=a.isPlaying,s=a.counter,c=[],l=0;l<t;l++)i&&l===s?c.push("currentPad"):r&&1==r[l]?c.push("padGlow"):c.push("pad");return o.a.createElement("div",{className:"padArea"},Object(E.a)(Array(t)).map((function(e,t){return o.a.createElement("div",{className:c[t],key:t,onClick:function(){n(t)}},o.a.createElement("h6",null,t+1))})))}}]),t}(o.a.Component),w=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).bufferLoad=function(){var e=n.state,t=e.bar,a=e.soundmap,o=e.context,r=e.connectors,i=e.volume,s={},c=Object.keys(a),l={};null===o&&(o=new window.AudioContext);var u=new b(o,{seconds:.2,decay:0,reverse:0}),d=o.createGain();d.gain.value=i,d.connect(o.destination);for(var m={},h=0,v=c;h<v.length;h++){var f=v[h],y=new Array(t).fill(0);l[f]=y,r[f]=o.createGain(),m[f]={attackTime:.001,decayTime:.102,sustain:1.3,relaseTime:.4}}!function(e,t,n,a){var o=[],r=[];for(var i in n){var s=n[i];o.push(i),r.push(s)}new p(e,r,(function(e){for(var n=0;n<e.length;n++){var r=e[n],i=o[n];t[i]=r}a&&a()})).load()}(o,s,a),n.setState({context:o,buffer:s,pattern:l,soundkeys:c,connectors:r,endConnector:d,reverb:u,envelopes:m})},n.clearPattern=function(e){var t=n.state,a=t.pattern,o=t.bar,r=new Array(o).fill(0);a[e]=r,n.setState({pattern:a})},n.start=function(){var e=n.state,t=e.tempo;!0!==e.isPlaying&&(n.interval=setInterval(n.loop,6e4/(4*t)),n.setState({isPlaying:!0}))},n.stop=function(){!1!==n.state.isPlaying&&(window.clearInterval(n.interval),n.setState({isPlaying:!1}))},n.changeTempo=function(e){var t=n.state,a=t.tempo,o=t.isPlaying,r=n.start;a+e>=50&&a+e<=180&&(a+=e,!0===o?(n.stop(),n.setState({tempo:a},(function(){r()}))):n.setState({tempo:a}))},n.tap=function(){n.setState({selectedSound:null})},n.loop=function(){var e=n.state,t=e.counter,a=e.bar,o=e.soundkeys,r=e.pattern,i=e.buffer,s=e.context,c=e.connectors,l=e.envelopes,u=!0,d=!1,m=void 0;try{for(var h,p=o[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var f=h.value;1===r[f][t]&&v(s,i[f],0,c[f],l[f])}}catch(b){d=!0,m=b}finally{try{u||null==p.return||p.return()}finally{if(d)throw m}}t=(t+1)%a,n.setState({counter:t})},n.changeSelectedSounds=function(e){n.setState({selectedSound:e})},n.handleClick=function(e){var t=n.state,a=t.context,o=t.buffer,r=t.selectedSound,i=t.pattern;if(null===r)v(a,o.kick,0);else{for(var s=0===i[r][e]?1:0,c=[],l=0;l<i[r].length;l++)l!==e?c.push(i[r][l]):c.push(s);i[r]=c}n.setState({pattern:i})},n.handleEnvelope=function(e,t){var a=n.state.envelopes;a[t]=e,n.setState({envelopes:a})},n.toggleReverb=function(){var e=n.state.reverbOn;n.setState({reverbOn:!e})},n.keyHandler=function(e){var t=n.state,a=t.buffer,o=t.selectedSound,r=t.context,i=t.connectors,s=t.envelopes;h.a.isEmpty(a)||null!==o||(97!==e.keyCode&&49!=e.keyCode||v(r,a.kick,0,i.kick,s.kick),98!==e.keyCode&&50!=e.keyCode||v(r,a.hihat,0,i.hihat,s.hihat),99!==e.keyCode&&51!=e.keyCode||v(r,a.openhat,0,i.openhat,s.openhat),100!==e.keyCode&&52!=e.keyCode||v(r,a.snare,0,i.snare,s.snare),101!==e.keyCode&&53!=e.keyCode||v(r,a.tom,0,i.tom,s.tom),102!==e.keyCode&&54!=e.keyCode||v(r,a.ride,0,i.ride,s.ride))},n.changeVolume=function(e){var t=n.state.volume;t+e>=0&&t+e<=2&&n.setState({volume:t+e})},n.handleFiltersValue=function(){var e=n.state,t=e.endConnector,a=e.volume,o=e.reverb,r=e.reverbOn,i=e.context;null!==t&&(t.gain.value=a,r?(t.disconnect(),t.connect(o.input),o.connect(i.destination)):(t.disconnect(),t.connect(i.destination)))},n.state={buffer:{},pattern:{},soundnames:{kick:"kick",hihat:"hihat"},soundkeys:[],context:null,soundmap:{kick:"https://raw.githubusercontent.com/wesbos/JavaScript30/master/01%20-%20JavaScript%20Drum%20Kit/sounds/boom.wav",hihat:"https://raw.githubusercontent.com/wesbos/JavaScript30/master/01%20-%20JavaScript%20Drum%20Kit/sounds/hihat.wav ",openhat:"https://raw.githubusercontent.com/wesbos/JavaScript30/master/01%20-%20JavaScript%20Drum%20Kit/sounds/openhat.wav",snare:"https://raw.githubusercontent.com/wesbos/JavaScript30/master/01%20-%20JavaScript%20Drum%20Kit/sounds/snare.wav",tom:"https://raw.githubusercontent.com/wesbos/JavaScript30/master/01%20-%20JavaScript%20Drum%20Kit/sounds/tom.wav",ride:"https://raw.githubusercontent.com/wesbos/JavaScript30/master/01%20-%20JavaScript%20Drum%20Kit/sounds/ride.wav"},tempo:60,bar:16,isPlaying:!1,selectedSound:null,counter:0,connectors:{},endConnector:null,volume:1,reverb:null,reverbOn:!1,envelopes:null},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.bufferLoad()}},{key:"render",value:function(){var e=this.state,t=e.context,n=e.soundkeys,a=e.bar,r=e.tempo,i=e.connectors,s=e.endConnector,c=e.pattern,l=e.selectedSound,u=e.isPlaying,d=e.counter,m=e.volume,v=e.reverbOn;return window.addEventListener("keydown",this.keyHandler),this.handleFiltersValue(),o.a.createElement("div",null,!h.a.isEmpty(i)&&o.a.createElement("div",{className:"cointainer"},o.a.createElement("div",{className:"overallControl"},o.a.createElement(g,{tempo:r,changeTempo:this.changeTempo}),o.a.createElement(C,{volume:m,changeVolume:this.changeVolume}),o.a.createElement("div",{className:!0===v?"reverbButtonSelected":"reverbButton",onClick:this.toggleReverb},"reverb")),o.a.createElement(k,{soundkeys:n,changeSelectedSounds:this.changeSelectedSounds,connectors:i,endConnector:s,context:t,selectedSound:l,handleEnvelope:this.handleEnvelope,clearPattern:this.clearPattern}),o.a.createElement(S,{bar:a,handleClick:this.handleClick,padPattern:c[l],counter:d,isPlaying:u}),o.a.createElement("div",{className:"controlArea"},o.a.createElement("div",{className:!1===u?"start":"stop",onClick:!1===this.state.isPlaying?this.start:this.stop},!1===this.state.isPlaying?"start":"stop"),o.a.createElement("div",{className:null!==l?"start":"stop",onClick:this.tap},"tap"))))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},6:function(e,t,n){}},[[11,1,2]]]);
//# sourceMappingURL=main.fcc9b723.chunk.js.map